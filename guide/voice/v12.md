---
pageTheme: purple
---

# Comparison to v12

Discord.js v11 and v12 are released with built-in voice engines for playing audio over Discord. They have been plagued with issues and suffered from volatile performance.

`@discordjs/voice` is a new replacement for these engines and is a separate "add-on" you can install, whose purpose is to solve these problems.

## Improved audio playback

The focus of `@discordjs/voice` was to improve audio playback performance. In Discord.js v12, streams would occasionally suffer from "micro tears" in the audio. This would sound like a small crackle between audio packets, or simply a very small gap between audio packets.

Additionally, audio streams could sometimes sound like they are speeding up/slowing down after gaps in transmission.

`@discordjs/voice` has a completely new audio dispatch cycle, and this aims to solve the issue. Audio packets are now sent more reliably at 20ms intervals, resulting in a _much_ improved playback experience.

Additionally, audio streams are no longer tightly coupled with voice connections. This results in more predictable behavior for your audio streams when network errors occur.

There are many more under-the-hood changes made to the library that all come together to give the user more control over audio transmission.

## Removal of voice receive

Voice receive is present in Discord.js v12 and allows bots to "listen" to other users in voice channels. This was always an undocumented feature of the Discord API, and sadly it has broken more and more over the lifespan of v12 for reasons unknown, and it is at a stage where it is no longer reliable.

We have taken the decision to remove support for voice receive until the feature becomes documented.

## Removal of `seek` in streams

In Discord.js v12, you could specify a `seek` parameter when playing audio to jump to a specific part of the audio track and begin playback from there. This only applies to FFmpeg streams, and the option is ignored for any other type of stream. Additionally, it leads to the question of whether we should support additional FFmpeg parameters.

This inconsistency has led to confusing problems for developers, and we now feel that `seek` is outside the scope of `@discordjs/voice`. Instead, you can quite easily specify `seek` - as well as any other FFmpeg options that you want to - using [prism-media](https://github.com/amishshah/prism-media). For example, here is how you could re-implement seek for streams that you need it for:

```js
const prism = require('prism-media');
const { createAudioResource } = require('@discordjs/voice');

// These are arguments used to convert the input to a format suitable for @discordjs/voice
const FFMPEG_ARGUMENTS = [
	'-analyzeduration', '0',
	'-loglevel', '0',
	'-f', 's16le',
	'-ar', '48000',
	'-ac', '2'
];

// An audio stream starting from 10mins onwards in myfile.mp3
const stream = new prism.FFmpeg({
	args: ['-ss', '00:10:00', '-i', 'myfile.mp3', ...FFMPEG_ARGUMENTS];
});

const resource = createAudioResource(stream);
```
